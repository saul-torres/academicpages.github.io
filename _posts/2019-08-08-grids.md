---
title: 'Creating a rotated but regular points grid'
date: 2019-08-08
permalink: /posts/2019/08/grids/
tags:
  - r
  - grids
  - gis
---

Recently [at work](http://www.ihcantabria.com/es/) we have had to deal with a situation that has given us a little headache.

A normal common situation (at least for us) is to have a matrix or spatial layer of points in a "regular" situation (let's call it that way), or in a "straight" form (orthogonal) to the reference axes.

However, for the sake of life (read, regular mesh for modeling coastal dynamics), we needed a regular rotated mesh. The important term (the really important one) is rotated.
The "direct" option (the first thing that comes to mind) is to create a straight regular mesh, and turn it. Solved. but the reality is that it is not something so simple. Rotation is one type of "affine transformations". An affine transformation, which includes among others, shifting (translation), scaling and rotation, is any transformation that preserves lines and parallelism. However, angles or length are not necessarily preserved ([Lovelace, 2019](https://geocompr.robinlovelace.net/geometric-operations.html#geo-vec). And trust me, angles are not preserved.

The situation (and I don't want to go into more detail about the contour conditions) was also a bit more complicated because we necessarily had to work in UTM coordinates.

So in short, what we wanted and needed was a regular mesh, but rotated with respect to the coordinate axes. Something similar to the following figure.


```{r}
# execute code if the date is later than a specified day
do_it = Sys.Date() > '2018-02-14'
```
